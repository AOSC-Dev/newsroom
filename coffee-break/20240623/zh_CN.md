安记冰室・六月下
===============

<!-- 拿着肉夹馍的 -->

> “咥个肉夹馍呷？”

欢迎阅读安同开源社区 (AOSC) 期刊《安记冰室》！本栏目旨在以轻松可及的方式，以图文形式介绍过去两周的开发进展、社区事务与近期社区内外活动资讯。此外，本栏目还用于发布与社团及行业人士及代表的访谈录，以特辑形式发布。本栏目不发表评论性内容。

社区脉动
--------

### 盛夏将至：AOSCC 2024 开放报名！

![AOSCC 2024，咱上吉林大学去！](/coffee-break/20240623/imgs/aoscc-2024-jlu.png)

经过近一个月紧张的联络与组织工作，AOSCC 2024 工作组终于成功与吉林大学校方各部门达成协议——今年度的社区线下活动已得到校方正式批准！前序手续一切就绪，AOSCC 2024 报名也便正式开放了。

请有意参会者尽快完成报名登记，以便我们安排包括人员登记和协议酒店预订等的工作。

[点此报名 >>](https://www.wjx.top/vm/hwRCH7e.aspx)

<!-- 微信公众号请使用 /coffee-break/20240623/imgs/aoscc-2024-registration-qrcode.jpg；文案“请扫描下方二维码填写问卷” -->

在未来数周中，我们将随着组织工作的进展持续发布讲者、日程和到场福利等信息，敬请关注我社各资讯渠道和 [AOSCC 2024 信息页](https://wiki.aosc.io/zh/community/aoscc/2024)。

### 高手如云：AOSCC 2024 讲者与课题一瞥

<!-- 公众号等平台可考虑单独发布并内联此段 -->

在过去几年中，AOSCC 逐步从社区内部聚会转化成了一个面向国内 Linux 爱好者的公开活动。其中演讲内容最能体现这一变化：2023 年的 AOSCC 便囊括从社区报告到项目分享，又到各路同行们的技术、经验分享乃至对话会等多种形式。社区年度线下聚会的内容也随着社区好友们的参与不断丰富和多样化。

今年的 AOSCC，在介绍社区工作进展之余，我们也通过各方努力找来了多名来自校园社团、社区与行业的一线工作人员来分享各类技术与运营上的经验、思考与成果。在 AOSCC 2024，我们计划根据分享课题的类型组织议程，下面我们对目前已初步确定的分享课题板块进行简要介绍。

**社区工作分享与展望**

2023 年，随着软件包维护自动化的实现、龙架构版本正式发布、图形化安装程序发布、oma 的不断完善乃至外宣工作的重启，社区工作效率和关注度都有显著改善。今年的 AOSCC 上，社区贡献者将如常分享社区各项工作的进展及未来一年的计划：

- 白铭骢：社区年度工作报告与展望
- 杨欣辉：基于 OverlayFS 的多版本离线安装盘的设计
- 傅孝元：小熊猫包管理 oma 1.0-1.3 的进化与 1.4 特性介绍
- 王邈：龙架构新旧世界兼容层 libLoL 的实现原理

**发行版维护与管理**

作为一个以发行版维护作为核心项目的社区，我们非常关注学习和参考发行版维护的不同思路及经验。今年，我们请来了来自七个不同发行版项目的同行前来介绍工作经验：

- 刘子兴（科能 Ubuntu Foundations Team 工程师，AOSC 贡献者）：Ubuntu 与 Debian 社区维护工作的协作与求同存异
- 李成刚（统信科技 deepin 系统组负责人）：deepin 发行版的发展历史与未来展望
- Revy（PLCT 实验室 RevyOS 团队主管）：RevyOS 与厂商进行开源适配对接工作的思路与主要难点
- 关文涛、王昱力（统信科技内核研发工程师）：审阅信创厂商 Linux 内核补丁的经验与思考
- 杨欣辉、Henry Chen（安同 OS 维护者）：MIPS 发行版及基础设施的现状与无奈
- Coelacanthus（Arch Linux RISC-V 维护者）：内核配置维护中的重复劳动与割裂
- 梓瑶、YukariChiba（eweOS 维护者）：eweOS 作为“标新立异”发行版的选型与开发维护

**社区与社团运营**

社区与社团运营是团体工作与活动的基础，从组织分工到外宣招新都是推进工作的关键。今年，我们邀请了几位来自草根社区的同事们介绍他们的工作经验：

- xen0n（龙芯开源社区打杂，《咱龙了吗？》主创）：由第三方推动的龙芯生态建设，一年间的观察与个人体会
- 林子（曲阜师范大学计算机爱好者协会组织者）：“双非高校”社团的生存现状与思考

**社区与技能实践**

我们相信，开放社区是实践技能与思路的理想场所。那么，为何参与到开源社区的工作中，又要如何权衡付出与回报呢？

为此，我们请来了来自红帽公司的 Zamir Sun 介绍在校学生参与开源社区对后续就业的帮助。Zamir Sun 长期参与 AOSC 的设施运维和 Fedora 的打包工作，在日常工作之余依然坚持贡献社区。

早在 2017 年，Zamir Sun 便在于广州举办的 AOSCC 活动中分享了这一课题；七年过去了，他对这一问题的思考又有何变化呢？且听 Zamir 老哥娓娓道来……

**讲者招募！**

如果您或认识的朋友有兴趣来 AOSCC 分享工作经验与技能，欢迎您通过社区[各聊天群组](https://aosc.io/zh-cn/contact/)或[社区论坛](https://bbs.aosc.io/)与我们联系。

让我们一起携手，让 AOSCC 变得更加丰富精彩吧！

### 农企舰队：四台 x86-64 构建服务器即将上线

![农企舰队向您致意！](/coffee-break/20240623/imgs/amd-armada.jpg)

得力于社区各位好友的[慷慨解囊](https://wiki.aosc.io/zh/community/crowdsourcing/new-amd64-servers/)，我们购置并上线了 4 台基于 AMD Ryzen 7 5700X 的 x86-64 构建服务器。每台服务器均搭载 64GiB 内存及 800GB 的 Intel 750 固态硬盘，可显著改善我社安同 OS x86-64 移植的维护体验。

### 应用上新：libLoL 应用兼容性数据库发布更新

![libLoL 主页监测来自龙芯应用合作社和其他来源应用的兼容性](/coffee-break/20240623/imgs/liblol-appdb.png)

日前，[温柔](https://github.com/xunpod)刷新了用于龙架构系统的 [libLoL 应用兼容性数据库](https://liblol.aosc.io/docs/apps/)，包含 18 款来自龙芯应用合作社和 3 款来自其他来源的 3 款应用程序。在更新应用程序信息的同时，温柔还对许多应用进行了兼容性测试并更新了测试报告，希望能帮到各位龙架构系统用户。

系统快讯
--------

### 精确度升级：Debian/Ubuntu 依赖兼容框架 Spiral 发布 v2 版

![本安同 OS 具有超级精确旋风牛力！](/coffee-break/20240623/imgs/spiral-cow-power.png)

三月底，我们正式推送了安同 OS 的 Debian/Ubuntu 兼容性更新，通过在软件包构建时自动标记与 Debian/Ubuntu 兼容的软件包名以实现对各类商业软件的兼容性。

日前，[王江津](https://github.com/RedL0tus)推送了 Spiral 兼容框架的第二版，通过反查 Debian 及 Ubuntu 的软件包内容索引实现了更为精确的兼容标记；对安同 OS 使用了非标准架构名的移植，如基于 MIPS 架构的龙芯三号移植（dpkg 架构名 `loongson3`）等实现了架构名转译，后续在这些架构上安装商业软件也会变得更为容易。

### 将塞爆进行到底：安同 OS 离线安装镜像展望

![安同 OS 离线镜像使用 OverlayFS 实现了组件去重和多系统版本集成](/coffee-break/20240623/imgs/overlay-livekit.png)

一直以来，由于安同 OS 依赖树齐全及功能全开的设计导向，系统大小与其他操作系统相比明显偏大。这一特征加之以安装盘需要从互联网拖取（大小相当可观的）系统包的设计广受用户诟病——一个超过 3GiB 大小的安装盘，居然还需要下载系统数据！

为解决这一问题，[杨欣辉](https://github.com/Cyanoxygen)、[傅孝元](https://github.com/eatradish)和[白铭骢](https://github.com/MingcongBai)一同实现了一款基于 OverlayFS 差分文件系统的离线系统安装盘。该安装盘集成了所有系统镜像并对共用组件进行了去重，这样以来，用户朋友们不但不需要在安装过程中等待下载，还可以：

- 直接从 U 盘或光盘启动试用安同 OS 的桌面版
- 在搭载 NVIDIA 显卡的设备上正常启动安装和试用环境

可谓一石三鸟！虽然系统大小直奔 8GiB，双层 DVD 都要塞不下了，但您就说功能全不全吧——

我们计划在下周发布预览镜像供各位测试，敬请期待！

### 病根初现：龙架构 AMD 显卡稳定性问题调查实录

![令不少龙架构移植维护者闻风丧胆的 glmark2 buffer 测试](/coffee-break/20240623/imgs/glmark2-buffer.jpg)

安同 OS 的龙架构移植已有接近一年的维护历史，其中有一个如鬼魂一般的 Bug 一直缠绕着各位龙架构设备用户：AMD 显卡驱动在高图形负载下会崩溃复位。在用户视角上看，就是桌面会突然黑屏，所有桌面会话注销，所有未保存工作随之灰飞烟灭。这一问题为各位日用龙架构设备的维护者和用户们都带来了极大的困扰，对使用龙架构设备工作的信心造成了非常大的打击。

日前，[Fearyncess "Lain" Yang](https://github.com/Fearyncess) 通过排查旧世界发行版的内核源码总算定位到了造成这一问题的直接原因。简要地说：AMD 针对其基于 GCN 2.0/3.0/4.0 核心的显卡针对硬件问题引入的规避性代码踩了龙芯 7A 桥片对数据和终端请求处理顺序不稳定的“地雷”，使得驱动传入了错误的数据和中断指令，造成驱动故障。

就这一问题，[郑兴达](https://github.com/Icenowy)提交了[上游补丁](https://lore.kernel.org/dri-devel/20240617105846.1516006-1-uwu@icenowy.me/)，但遭到了 AMD 显卡驱动维护者的明确反对。考虑到这一问题暴露了双方硬件均存在的问题，该补丁很可能无法提交到上游——也许在不久的将来会有针对龙架构平台的内核补丁修复或规避该问题，我们能做的只有希望和继续努力了。

<!-- 公众号等平台请注意内联 -->

有关该问题的详细调查报告，详请见[《请您测试：龙架构 AMD 显卡稳定性修复》](loongarch-amdgpu-fix.zh_CN.md)一文。

开发者角
--------

### 监工之乐：BuildIt! 推出实时监控功能

![无聊了来刷刷日志玩吧！](/coffee-break/20240623/imgs/buildit-monitor.png)

上周，[陈嘉杰 (jiegec)](https://github.com/jiegec) 和[傅孝元](https://github.com/eatradish)为 [BuildIt!](https://github.com/AOSC-Dev/buildit) 自动化设施实现了实时监控功能，方便安同 OS 维护者查阅各构建服务器当前构建任务的状态及确定各机器的性能、稳定性状态等。

如果您好奇我们的构建服务器都在忙些啥，欢迎来 [BuildIt! 构建服务器状态主页](https://buildit.aosc.io/workers) 瞅瞅！

### aosc-findupdate 0.5.0 发布：新增 UPSTREAM_VER 变量

在 [autopr](https://github.com/AOSC-Dev/autopr) 自动化软件包更新及推测设施投产后，维护者们便将目光投向了如何提高更新自动化的覆盖率上。这一新工作方向的难点之一便是解决[软件包树](https://github.com/AOSC-Dev/aosc-os-abbs)中数十个复杂的“组合包 (compound packages)”（包含多个不同版本组件的软件包）了。为解决这一问题，[傅孝元](https://github.com/eatradish)和[杨欣辉](https://github.com/Cyanoxygen)设计了 `UPSTREAM_VER` 标记法，用于标记某个组合包中主要上游版本，以便 [aosc-findupdate](https://github.com/AOSC-Dev/aosc-findupdate) 正确标记更新。

日前发布的 [aosc-findupdate](https://github.com/AOSC-Dev/aosc-findupdate) 0.5.0 版已包含此标记的支持，各维护者可根据需要使用。

### 红花榜

感谢在过去一期中参与 AOSC 项目开发和维护工作的各位同事：

- [salieri](https://github.com/BC204)
- [柴天浩](https://github.com/cthbleachbit)
- [杨欣辉](https://github.com/Cyanoxygen)
- [diredocks](https://github.com/diredocks)
- [傅孝元](https://github.com/eatradish)
- [Zixuan "Lain" Yang](https://github.com/Fearyncess)
- [德州润华](https://github.com/HouLiXieBuRou)
- [Icenowy Zheng](https://github.com/Icenowy)
- [陈嘉杰 (jiegec)](https://github.com/jiegec)
- [Kexy Biscuit](https://github.com/KexyBiscuit)
- [刘子兴](https://github.com/liushuyu)
- [白铭骢](https://github.com/MingcongBai)
- [千须末 (OriginCode)](https://github.com/OriginCode)
- [ouankou](https://github.com/ouankou)
- [SignKirigami](https://github.com/prcups)
- [王江津](https://github.com/RedL0tus)
- [rickliu2000](https://github.com/rickliu2000)
- [王邈](https://github.com/shankerwangmiao)
- [shatian114](https://github.com/shatian114)
- [skybird](https://github.com/SkyBird233)
- [Student Main](https://github.com/stdmnpkg)
- [StephDC](https://github.com/StephDC)
- [Suyun](https://github.com/Suyun114)
- [温柔](https://github.com/xunpod)

此外，欢迎新加入我社贡献者行列的新人，愿合作愉快，共同进步：

- [bubu](https://github.com/p3psi-boo)

一起吹水
--------

互联网是我社的主要活动场所，欢迎来社区各群聊及语音频道交流玩耍：

### 微信群

请扫描此二维码添加好友**并说明来意：申请加入 AOSC 社区频道。**

![wechat](/coffee-break/20240623/imgs/wechat.png)

### QQ 群

![qq](/coffee-break/20240623/imgs/qq.jpg)

### Telegram 群组

![telegram](/coffee-break/20240623/imgs/telegram.png)

### Discord 语音频道

![discord](/coffee-break/20240623/imgs/discord.png)

栏目介绍
--------

考虑到社区项目和文化等日趋成熟，我们决定重启外联和宣传工作，在更广阔的天地寻找志同道合的朋友。

您阅读的本期半月刊即是我们外宣工作的一部分，我们的文字宣传栏目如下：

- 安记冰室：社区双周报及访谈栏目
- 聊斋：信创及稀见软硬件专题
- 怀古：古董软硬件专题
- 实况：各类线下活动资讯

其中，《安记冰室》于北京时间 (UTC+8) 每月第二、四个周末发布，其他栏目均视讯息内容及编辑进展发布；发布平台包括：

- 社区门户
- 微信公众号“安同开源”
- Bilibili 帐号“安同开源社区”
- 知乎帐号“安同开源社区”
- 微博帐号 @安同开源
- Twitter/X @aosc_dev_cn 及 @aosc_dev（英文）

此外，我们正寻求国内开源及 Linux 相关媒体的朋友合作，一起将我社的工作和文化广而告之。
