[media-writer]: https://releases.aosc.io/writer/
[download]: https://website-2023.aosc.io/download/
[all-downloads]: https://releases.aosc.io/
[contact]: https://website-2023.aosc.io/contact

# 安同 OS 离线安装盘发布说明

大家久等了！备受期待的安同 OS 离线安装盘现已发布，可供大家下载使用。新的离线安装盘比之前的安装盘体积增加了近两倍，附带了系统包，因此安装期间无需联网，免去多余的下载量。除此之外，您现在可以从离线安装盘启动试用环境，一睹为快。

架构支持
--------

目前离线安装盘支持所有一级架构：

- x86-64 (Intel, AMD 等)
- AArch64 [^1]
- 龙架构 (LoongArch64)

[^1]: ARM64 仅支持 ServerReady (SBSA) ，如鲲鹏、飞腾等提供了 EFI 环境的设备。

特性说明
--------

新的安装盘引入了诸多特性，在此说明：

- 离线安装：整个安装过程无需联网，极大提升安装体验。
- 试用环境：您可以在启动菜单选择 “Try AOSC OS Desktop” 选项，现场试用安同 OS 的桌面版。
- 多版本支持：离线安装盘带有多个版本，随您挑选。
- NVIDIA 支持：带了 NVIDIA 独显就开进不了图形界面？试试带着 N 卡驱动启动安装环境！
- 经过改进的命令行安装程序：新的命令行安装程序支持离线及在线安装，更有无人值守配置文件支持。

### 离线安装包

不用再担心下载完 3GB 的安装环境后还要下载 9GB 系统数据的情况了！本次发布的安装盘完全内置桌面版、服务器版的系统包，并将安装盘大小控制在 9GB 以下。安装期间无需联网，简便快捷。

由于安装盘大小过大，您无法将其刻录在双层 DVD 光盘上。您可以刻录至蓝光光盘中，但非常不推荐用光盘启动安装环境，因为受制于光盘的局限性，随机读取性能会大幅降低。

### 试用环境

不知道安同 OS 的桌面默认长啥样？想看看安同 OS 的桌面被微调到了什么程度？您可以进入试用环境，试着用 oma 安装软件包，或者体验一下开箱即用的 KDE Plasma 桌面环境！

体验试用环境期间所做的更改均保留在内存中，并且不会挂载您的硬盘。如有需要，请挂载您的硬盘，然后将需要保存的内容复制其中。

附带系统版本
--------

所有架构的离线安装盘均附带以下系统发行：

- 基础版：仅安装基本软件、SSH 和管理工具等，没有图形界面。
- 桌面版：带有配置经过微调的安同 OS KDE Plasma 桌面环境。
- 服务器版：由基础版加上服务器常见软件而来。包含 LNMP 栈、httpd、PostgreSQL 等常用服务端软件。

取决于所选设备的架构，安同 OS 离线安装盘带有不同预装组件的系统。

- x86-64 和 AArch64 可选附带 NVIDIA 驱动的桌面版。安装期间就帮您装好 NVIDIA 驱动，免去安装后的烦恼。同时，也可以使用 NVIDIA 驱动启动安装环境。
- 龙架构可选带有 LATX + Wine 的桌面版，一键满足您的需要。

下载地址
--------

最新发布的安同 OS 离线安装盘可以在[官网下载页面][download]中找到。如果您需要预览版或旧版本的安装盘，请前往[AOSC OS 软件仓库下载页面][all-downloads]下载。

推荐您使用 AOSC 启动盘制作向导写入安装盘。您可以[在此处获取][media-writer] AOSC OS 安装盘制作向导。您无需提前下载 ISO，制作向导会自动选择合适的版本下载。

如果您使用 Ventoy，请在安装盘下载完毕后，先阅读下文的使用方法，了解注意事项。

使用方法
--------

您可以通过如下几种方式写入或启动离线安装盘，每种方式的使用方法将在下文介绍：

- 通过 AOSC 启动盘制作向导写入 (Windows 及 macOS)
- 通过 Rufus 写入 (Windows)
- 通过 Ventoy 启动
- 通过 `dd` 命令写入（Linux 及 macOS，不推荐）

请注意，安装盘暂不支持直接解压 ISO 至存储设备的写入方式。

### 通过 AOSC 启动盘制作向导写入（适用于 Windows 及 macOS）

使用专门的程序写入方便快捷，出错点较少，因此通过 AOSC 启动盘制作器写入是最推荐的方式。您可以[在此处下载][media-writer] AOSC OS 启动盘制作向导。启动盘制作器安装完毕后，根据向导的提示选择架构和版本，点击写入即可。请注意选择正确的存储设备。

### 通过 Rufus 写入（适用于 Windows）

从 [Rufus 官网](https://rufus.ie/)下载 Rufus 并运行。选择好存储设备和 ISO 之后，点击 “开始”。

- Rufus 会询问您使用哪种方式写入 ISO。请选择 “使用 DD 模式写入”，以保证写入的安装盘能够启动。
- 如果您写入的是龙架构的安装盘，Rufus 会自动选择 DD 模式。

### 使用 Ventoy 启动

如果您有写入了 Ventoy 的存储设备，可以直接将下载的 ISO 复制到 U 盘中。

在用 Ventoy 启动离线安装盘时，请注意避免以下问题：

- 由于安装盘的引导器使用了自有的组件，因此在使用 Ventoy 启动安装盘时使用 GRUB2 模式引导会出现错误。请使用普通模式 (Normal mode) 引导安装盘，而非 GRUB2 模式。
- 安装盘体积较大，请确保 Ventoy 分区的文件系统不是 FAT32。

### 通过 `dd` 命令写入（不推荐）

**注意：由于本方式出错率极高，因此仅适用于专业 Linux 用户。请尽量使用其他方法。** 因此，本节内容仅供参考。

下载安装盘之后，确定您的移动存储设备所在位置（如 `/dev/sdb`），然后使用 `dd` 命令写入 ISO：

```shell
# dd if=aosc-os_installer_20240728_amd64.iso of=您的移动存储设备路径 bs=1M status=progress
```

注意事项及常见问题
--------

### 搭载 NVIDIA 独显的笔记本电脑

如果您的笔记本电脑搭载 NVIDIA 独立显卡，请谨慎使用附带 NVIDIA 显卡驱动的安装或试用环境：

- 如果您的笔记本没有在固件中启用显卡直通（或 Advanced Optimus），您可能需要启动标准安装环境。您可以继续安装带 NVIDIA 驱动的桌面版系统。
- 如果您的笔记本在固件中启用了显卡直通（或 Advanced Optimus），您需要启动附带 NVIDIA 驱动的安装或试用环境，并安装附带 NVIDIA 驱动的桌面版系。统

### 搭载 NVIDIA 显卡的台式机

- 如果您的台式机没有内置显卡，请启动附带 NVIDIA 驱动的安装或试用环境，安装附带 NVIDIA 驱动的桌面版系统。
- 如果您的台式机有内置显卡，且显示器连接在主板上，请启动标准安装或试用环境，在安装系统时选择附带 NVIDIA 驱动的桌面版系统。
- 如果您的台式机有内置显卡，且显示器连接在显卡上，请启动附带 NVIDIA 驱动的安装或试用环境，在安装系统时选择附带 NVIDIA 驱动的桌面版系统。

### 带有高刷屏的笔记本电脑

先前有用户报告带有高刷屏的笔记本电脑无法正常启动安装环境。我们已将此问题修复，如果您的笔记本电脑搭载高刷新率的内置屏幕，且依旧在启动安装环境时出现黑屏、无法进入安装界面的情况，请立即通过[社区各聊天群组][contact]报告。

### 分辨率高于 1080p 的屏幕或显示器

如果您的笔记本屏幕或显示器的分辨率超过 1920×1080，启动桌面版试用环境时可能会被错误地设置缩放。您可以打开 “系统设置”，依次点击 “显卡与显示器” → “显示器配置”，并将缩放调整至您需要的缩放。

调整完毕后，请立即注销，系统将为您自动重新登录试用环境。

### NVIDIA 驱动的硬件支持情况

安同 OS 附带的 NVIDIA 显卡驱动的设备支持有限，因此过旧的 NVIDIA 显卡会无法启动或使用附带 NVIDIA 驱动程序的安同 OS 及安装环境。

现版本的 NVIDIA 显卡驱动程序最低支持 Maxwell 架构的显卡，其中比较常见的显卡型号如下：

- NVIDIA GeForce GTX 750, GTX 750 Ti（其他 700 系列的型号均不支持）
- NVIDIA GeForce GTX 950，960, 970, 980, 980 Ti
- NVIDIA GeForce GTX 800M, 900M 系列

自 Maxwell 架构的显卡均受现版本 NVIDIA 驱动程序支持。如果您不确定您的显卡能否被当前版本所驱动，可以前往 [NVIDIA 发布的过旧显卡及驱动程序支持列表](https://www.nvidia.com/en-us/drivers/unix/legacy-gpu/)查询。在这则列表中的显卡均不受当前版本的 NVIDIA 驱动支持。

### 有些笔记本或电脑会在启动时掉盘，导致无法进入系统

如果您启动安装盘时屏幕显示如下字样：

```
[  35.124581] I/O error: dev loop0, sector 12345 op 0x0:(READ) flags 0x800 phys_seg 3 prio class 0
[  35.131045] SQUASHFS error: Failed to read block 0x410972da: -5
[  35.134694] SQUASHFS error: Unable to read page, block aafe274, size 4980
```

则说明安装盘启动时遭遇了 USB 控制器重置或 U 盘掉盘。

我们暂时无法解决该问题，您可以尝试更换 USB 设备或 USB 接口。如果有雷雳 (Thunderbolt) 接口，请尝试将 Type-C 接口的 USB 存储设备接入其中。

如果上述方法均不起作用，请等待整合了内核更新的新版离线安装盘。我们为此带来的不便表示抱歉。

反馈渠道
--------

如您在使用离线安装盘期间遇到任何问题，欢迎通过如下渠道联系：

- 安同开源社区论坛：https://bbs.aosc.io/
- 安同开源社区 QQ 群：875059676
- 安同开源社区微信群（请联系公众号 “安同开源” 获取加群方式）
- 安同开源社区 Discord 群组：https://discord.gg/VYPHgt9
- 更多请参见[社区联系方式][contact]

更新发布渠道
--------

如有后续更新，我们会在以下平台发布更新说明：
- 安同开源社区门户 https://website-2023.aosc.io/
- 安同开源社区的各个聊天群组
- 安同开源社区公众号 “安同开源”
- Bilibili 帐号“安同开源社区”
- 知乎帐号“安同开源社区”
- 微博 “@安同开源”
- X (Twitter) @aosc_dev 及 @aosc_dev_cn

请遇到问题的各位关注上述渠道，及时获取安装盘、安同 OS 及周边项目的修复和更新。